{"ast":null,"code":"var _jsxFileName = \"/home/banish/Blogapp-using-MERN/src/Components/Posts/SinglePost/SinglePost.js\";\nimport Axios from 'axios';\nimport React, { Component } from 'react';\nimport './SinglePost.css';\nimport avtar from '../../../assets/avtar.jpg';\nimport { Link } from 'react-router-dom';\nimport moment from \"moment\";\nimport Spinner from '../../../Containers/Spinner/Spinner';\nimport Modal from '../../../Containers/Modal/Modal';\nexport class SinglePost extends Component {\n  constructor(props) {\n    super(props);\n\n    this.showModal = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.hideModal = () => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.deletePost = id => {\n      this.setState(pre => ({\n        isloading: true\n      }));\n      Axios.delete(\"/posts/\" + id).then(data => {\n        this.setState(pre => ({\n          isloading: false\n        }));\n        this.props.history.push('/mypost');\n      }).catch(e => {\n        this.setState({\n          isloading: false,\n          error: { ...this.state.error,\n            message: e.response.data.message,\n            code: e.response.status\n          }\n        });\n      });\n    };\n\n    this.state = {\n      singlePost: {},\n      error: {\n        message: '',\n        code: ''\n      },\n      isloading: false,\n      show: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState(pre => ({\n      isloading: true\n    }));\n    let id = this.props.match.params.id;\n    Axios.get('/posts/' + id).then(res => {\n      this.setState({ ...this.state.singlePost,\n        singlePost: res.data,\n        isloading: false\n      });\n      return Axios.get(\"/profile/bycreator/\" + res.data.creator);\n    }).then(data => {\n      this.setState({ ...this.state.singlePost,\n        user: data.data.profile,\n        isloading: false\n      });\n    }).catch(e => {\n      this.setState({\n        isloading: false,\n        error: { ...this.state.error,\n          message: e.response.data.message,\n          code: e.response.status\n        }\n      });\n    });\n  }\n\n  render() {\n    let isLoading;\n    let iserror;\n\n    if (this.state.isloading) {\n      isLoading = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mar-20\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }\n      }))));\n    }\n\n    if (this.state.error.code) {\n      iserror = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container error container-short\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mar-20\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }\n      }, \"Error Code - \", this.state.error.code), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }\n      }, \"Error Message - \", this.state.error.message))));\n    }\n\n    let post;\n    let post1 = this.state.singlePost;\n    let user = this.state.user;\n\n    if (this.state.singlePost) {\n      post = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }\n      }, post1.title), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"SingleBlog_avatar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/public/\" + (user === null || user === void 0 ? void 0 : user.username),\n        rel: \"noopener noreferrer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: (user === null || user === void 0 ? void 0 : user.imagePath) ? user.imagePath : avtar,\n        alt: \"img\",\n        width: \"75\",\n        height: \"75\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Link, {\n        to: \"/public/\" + (user === null || user === void 0 ? void 0 : user.username),\n        rel: \"noopener noreferrer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }\n      }, user === null || user === void 0 ? void 0 : user.username)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }\n      }, moment(post1.postDate).format(\"MMM DD, YYYY hh:mm\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"singlePost_content pt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: post1.imagePath,\n        className: \"img-fluid\",\n        alt: \"prof\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text pt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }\n      }, post1.content))));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, isLoading, iserror, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container py-4 SingleBlog \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, this.props.match.path === \"/mypost/:id\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-xs-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/edit/\" + post1._id,\n      className: \"list-group-item list-group-item-action\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 33\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.showModal,\n      className: \"list-group-item list-group-item-action\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 33\n      }\n    }, \"Delete\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-9 col-xs-12 main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.show,\n      handleClose: this.hideModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 29\n      }\n    }, post1.title), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      onClick: this.hideModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }, \"\\xD7\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }, \"Confirm delete\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger\",\n      onClick: () => this.deletePost(post1._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 33\n      }\n    }, \"Delete \"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-outline-dark\",\n      onClick: this.hideModal,\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 33\n      }\n    }, \"Close\"))), post))));\n  }\n\n}\nexport default SinglePost;","map":{"version":3,"sources":["/home/banish/Blogapp-using-MERN/src/Components/Posts/SinglePost/SinglePost.js"],"names":["Axios","React","Component","avtar","Link","moment","Spinner","Modal","SinglePost","constructor","props","showModal","setState","show","hideModal","deletePost","id","pre","isloading","delete","then","data","history","push","catch","e","error","state","message","response","code","status","singlePost","componentDidMount","match","params","get","res","creator","user","profile","render","isLoading","iserror","post","post1","title","username","imagePath","postDate","format","content","path","_id"],"mappings":"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","sourcesContent":["import Axios from 'axios'\nimport React, { Component } from 'react'\nimport './SinglePost.css'\nimport avtar from '../../../assets/avtar.jpg'\nimport { Link } from 'react-router-dom'\nimport moment from \"moment\";\nimport Spinner from '../../../Containers/Spinner/Spinner'\nimport Modal from '../../../Containers/Modal/Modal'\n\nexport class SinglePost extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            singlePost: {},\n            error: {\n                message: '',\n                code: ''\n            },\n            isloading: false,\n            show: false\n        }\n\n    }\n\n    showModal = () => {\n        this.setState({ show: true });\n    };\n\n    hideModal = () => {\n        this.setState({ show: false });\n    };\n\n    componentDidMount() {\n\n        this.setState(pre => ({\n            isloading: true\n        }))\n        let id = this.props.match.params.id\n        Axios.get('/posts/' + id).then(res => {\n            this.setState({ ...this.state.singlePost, singlePost: res.data, isloading: false });\n            return Axios.get(\"/profile/bycreator/\" + res.data.creator)\n        }).then(data => {\n            this.setState({ ...this.state.singlePost, user: data.data.profile, isloading: false });\n        }).catch(e => {\n                this.setState({\n                    isloading: false,\n                    error: {\n                        ...this.state.error, message: e.response.data.message,\n                        code: e.response.status\n                    }\n                });\n            })\n\n    }\n\n\n    deletePost=(id)=>{\n        this.setState(pre => ({\n            isloading: true\n        }))\n       Axios.delete(\"/posts/\"+id).then(data=>{\n        this.setState(pre => ({\n            isloading: false\n        }))\n        this.props.history.push('/mypost')\n       })\n       .catch(e=>{\n        this.setState({\n            isloading: false,\n            error: {\n                ...this.state.error, message: e.response.data.message,\n                code: e.response.status\n            }\n        });\n       })\n    }\n\n    render() {\n        let isLoading\n        let iserror\n\n        if (this.state.isloading) {\n            isLoading = (\n                <>\n                    <div className=\"container loading\">\n                        <div className=\"mar-20\">\n                            <Spinner />\n                        </div>\n                    </div>\n                </>\n            )\n        }\n\n        if (this.state.error.code) {\n            iserror = (\n                <>\n                    <div className=\"container error container-short\">\n                        <div className=\"mar-20\">\n                            <h5>Error Code - {this.state.error.code}</h5>\n                            <h4>Error Message - {this.state.error.message}</h4>\n                        </div>\n                    </div>\n                </>\n            )\n        }\n\n        let post\n        let post1 = this.state.singlePost\n        let user = this.state.user\n        if (this.state.singlePost) {\n\n            post = (<>\n                <h2>{post1.title}</h2>\n                <div className=\"SingleBlog_avatar\">\n                    <Link to={\"/public/\" + user?.username} rel=\"noopener noreferrer\" >\n                        <img src={user?.imagePath ? user.imagePath : avtar} alt=\"img\" width=\"75\" height=\"75\" />\n                    </Link>\n\n                    <Link to={\"/public/\" + user?.username} rel=\"noopener noreferrer\" >\n                        <p>{user?.username}</p>\n                    </Link>\n                    <p>{moment(post1.postDate).format(\"MMM DD, YYYY hh:mm\")}</p>\n                </div>\n                <div className=\"singlePost_content pt-3\">\n                    <img src={post1.imagePath} className=\"img-fluid\" alt=\"prof\" />\n                    <div className=\"text pt-3\">\n                        <p>{post1.content}</p>\n                    </div>\n                </div>\n            </>\n            )\n        }\n        return (<>\n            {isLoading}\n            {iserror}\n            <div className=\"container py-4 SingleBlog \">\n                <div className=\"row\">\n                    {this.props.match.path === \"/mypost/:id\" &&\n                        <div className=\"col-md-3 col-xs-12 \">\n                            <div className=\"list-group\">\n                                <Link to={\"/edit/\" + post1._id} className=\"list-group-item list-group-item-action\">Edit</Link>\n                                <button type=\"button\"  onClick={this.showModal} className=\"list-group-item list-group-item-action\">Delete</button>\n                            </div>\n                        </div>}\n                    <div className=\"col-md-9 col-xs-12 main\">\n                        <Modal show={this.state.show} handleClose={this.hideModal}>\n                            <div className=\"modal-header\">\n                            <h2>{post1.title}</h2>\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" onClick={this.hideModal}>&times;</button>\n                                \n                            </div>\n                            <div className=\"modal-body\">\n                                Confirm delete\n                           </div>\n\n                            <div className=\"modal-footer\">\n                                <button type=\"button\" className=\"btn btn-danger\" onClick={()=>this.deletePost(post1._id)}>Delete </button>\n                                <button type=\"button\" className=\"btn btn-outline-dark\" onClick={this.hideModal} data-dismiss=\"modal\">Close</button>\n                            </div>\n                        </Modal>\n                        {post}\n                    </div>\n                </div>\n            </div>\n        </>\n        )\n    }\n}\n\nexport default SinglePost\n"]},"metadata":{},"sourceType":"module"}